<html> 
<head> 
<title>nowjs test</title> 
<script type="text/javascript" src="jquery.min.js"></script> 
<script type="text/javascript" src="raphael-min.js"></script>
<script src="/nowjs/now.js"></script>
<script src="MultiArray.js"></script>
<script src="chatClient.js"></script>
<script>

$(document).ready(function(){

  now.receiveState = function(state){
  	draw(state);
  }
  
  now.name = prompt("What's your name?", "");
  
  now.receiveMessageNoNotifications = function(name, message){
  	appendMessage(name,message);
  }
    
  now.receiveMessage = function(name, message){
    appendMessage(name,message);
		
		if (name != now.name) {
			$("#notification").text("You have a new message!");
			playSound("beeplo.wav");
		}
  }
  
  now.receiveUserList = function(userListString) {
  	$("#users").text(userListString);
  }
  
  $("#send-button").click(function(){
    distribute();
  });
  
  $("#text-input").keypress(function(event) {
  if (event.which == 13) {
     distribute();
   }
	});

	// clear messages on click 
	$(window).click(function() {
  	clearMessageNotification();
  });
  $("#text-input").click(function() {
  	clearMessageNotification();
  });
  
	
});
</script>
</head> 
 
<body> 
<div id="notification" style="font-size:14px;color:green;font-weight:bold;"></div>
<div id="messages"></div>
<div id="sound" ></div>
<div id="users" style="font-weight:bold;"></div>

<input type="text" id="text-input">
<input type="button" value="Send" id="send-button">

<pre id="arrayPrint"></pre>
</body> 
</html> 
